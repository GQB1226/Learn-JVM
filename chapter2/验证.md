# 验证
验证是连接阶段的第一步，目的是为了Class文件的字节流信息符号当前jvm的要求，不会危害jvm自身的安全
***
验证阶段的工作量很大，大致可以分为4个阶段：文件格式的校验、元数据的校验、字节码的校验和符号引用校验

* **文件格式校验**
	该阶段验证主要目的是保证输入的字节流能被争取解析并存储于**方法区**内，格式上符合java类型信息的要求；该阶段是基于二进制字节流的，以后的三种验证都是基于方法区的存储结构的。
    
	1. 检验文件魔头 0XCAFEBABE
	2. 主、次版本是否在当前jvm的处理范围内
	3. 有关常量池信息的验证
	4. .......


* **元数据校验**
	进行语义分析，保证字节码描述的信息符合java语言规范要求，对元数据信息中的数据类型校验。比如
    1. 这个类是否有父类（除了Object之外，所有类都应该有父类）
    2. 这个类的父类是否继承了不被允许继承的类（被final修饰的类）
    3. ........

* **字节码的校验**
	整个验证阶段最复杂的一个阶段。主要是通过数据流和控制流的分析，确保程序的语义合法，符号逻辑，对类的方法体进行校验分析。例如：
    1. 保证任意时刻操作数栈的数据类型与指令代码序列都能配合工作，比如：不能允许在入栈是int类型，而出栈时按long类型
    2. 保证跳转不会跳到方法体以外的字节码指令上
    3. .........

* **符号引用校验**
	本阶段发生在连接的第三阶段：解析阶段，当jvm准备将符号引用转化为直接引用的时候。可以看作是对类自身以外信息的匹配校验，确保解析动作能正常运行。例如：
    1. 符号引用中通过字符串描述的全限定名能否找到对应的类
    2. 符号引用中的类、字段、方法的访问性是否可以被当前类访问
    3. .........
    